<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
    <title>Soil Moisture Monitoring and Recommendations</title>
    <script>
        const getMoistureData = () => {
            var data = fetch('http://plantsaver.peppersalt.info:5000/moisture', {
                method: 'GET',
                mode: 'cors',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'
                }
            }).then(function (response) {
                return response.json();
            }).then(function (data) {
                new Chart(
                    document.getElementById('moisture'),
                    {
                        type: 'line',
                        data: {
                            labels: data.moisture_levels.map(row => row.created_at),
                            datasets: [
                                {
                                    label: 'Moisture Level',
                                    data: data.moisture_levels.map(row => row.level * 100)
                                }
                            ]
                        }
                    }
                );
            }).catch(function (err) {
                console.log(err);
            });
        }
        getMoistureData();
    </script>
</head>

<body>
    <h1>Soil Moisture Monitoring and Recommendations</h1>
    <p>This is a basic HTML template.</p>
    <div style="width: 800px;"><canvas id="moisture"></canvas></div>
</body>

</html>